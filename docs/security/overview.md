# Security Overview

Privacy and security both are extremely important to me. I honestly am very hesitant to even put any of the information on here that I have put on here, so I am not sure how long I will keep it up.

The two concepts mentioned above are not mutually inclusive, but they do have some overlap. I remain private by not having any social media other than a LinkedIn account, which I only use for my professional life. Nothing about my private life is online, except in various forums where I use anonymous usernames tied to email aliases that forward to my regular email address (and even then, I only disclose information related to whatever the niche topic of that forum is).

Here are the various security measures I have taken:

## MFA
I use MFA for anything that makes it available. I prefer having the option of both a physical security key as well as 6-digit OTP that I get from the app on my smartphone. I store the seed phrases for the 6-digit OTP in an encrypted file. This encrypted file was created by Veracrypt using AES-256 encryption and Veracrypt's modified KDF using SHA-512 for the encryption key. The key that I enter to unlock it is *extremely* long and complex and took me a very long time to memorize, but I now know it by heart and, barring a head injury or sudden onset old age, it is safe in my head. I keep them backed up because I once broke a smartphone beyond repair and there was one account I was unable to access due to the 6-digit OTP being the only way in (the other option was a phone number I no longer had). If I have to, I will use email as an MFA option, but I will never use a phone number as an option. I know SIM swapping is becoming far more difficult, but I will not take any chances.

I use MFA even on my internal SSH, as it can be done with PAM. You have to install libpam-google-authenticator, but it actually has nothing to do with Google. You then set it up by running google-authenticator.

![image](/assets/photos/raspberrypi_mfa.png)

I was able to get MFA working to log into GNOME on Ubuntu when I used it as my main OS several years ago, but I cannot get it to work on Fedora with GNOME. I suspect it is related to SELinux.

## Passwords
All passwords are generated by, and stored in, KeepassXC. This is kept in my Nextcloud folder. Every time I make a change to the database, I have an unchanged copy of the database automatically generated and saved to my smartphone via Syncthing as a backup. Apart from the key that I use for encryption, any passwords that I need to regularly use are only 16 characters long, with letters (upper/lower), numbers, and special characters. They do take awhile to memorize, but it is worth it for the security of having something that is practically impossible to be guessed by a brute force attack or using a rainbow table. Anything that is not used several times a day is 32 characters. I have Keepass2Android on my smartphone for when I need to access a website or pull up a password (when I'm using a computer that isn't mine). No two passwords are the same.

![image](/assets/photos/keepassxc.png)

## VPN
I have two kinds of VPN that I use. The first is my own WireGuard VPN so that I can securely connect to my home network using my mobile devices, and all data then goes through the IDS on OPNsense both in and out.

The other is a commercial VPN that I pay for on a regular basis. While many argue that using a VPN, especially a commercial VPN, is not true security (and I agree for the most part), there is some argument to be made that it does provide a measure of security. For example, if I use my smartphone to get onto a public WiFi network (say, at a hotel), the owner of that WiFi network could see metadata about my Internet traffic; someone skilled would be able to make deductions as to what I am viewing, which means it is not private. If I am viewing something that can help give them a clue as to the location of my data or how to access it, then my security is compromised. Furthermore, if I am viewing something within a jurisdiction that might be illegal (say, looking at a pro-democracy website in an authoritarian country), my personal security will be severely compromised, all based on metadata. Using a commercial VPN hides all of this from the WiFi network owner.

Now, using a VPN that connects to my home network *also* hides all of this, BUT my ISP *can* see the metadata since the request goes from phone > home router > ISP > home router > phone, with the only VPN tunnel being between the phone and home router (simplified of course). Even if I cache DNS queries, the query was still made once so the ISP would have seen that. And even if I am using DNS over HTTPS or DNS over TLS (which I am), it doesn't really matter much because the ISP can see the IP addresses I am connecting to anyway (and then the DNS resolver, whether Cloudflare or Google or Quad9 or whoever can see the DNS query).

Therefore I utilize a commercial VPN when I am more worried about my privacy. The company from whom I purchase this service has shown in court time and time again that they do not keep logs.

Now, there is a plan that I am trying to work out for how to use the best of both worlds, which can be seen in [plans](/docs/issues/plans.md).

## Encryption
Everything in my Nextcloud folder is encrypted at rest except external storage (Syncthing) using Nextcloud's built-in encryption. I considered using something like Cryptomator, but then I would only be able to access my files from the desktop (or phone), and I sometimes need to access them from a web browser (though I try not to do this on a computer that is not mine, if possible). If I access Nextcloud from a computer (which is not mine) on another network, then it automatically redirects any http request to https (from .htaccess, HSTS, and reverse proxy). I point out Nextcloud specifically because that is really the only data I care about. Everything about my life is in that folder, so I do everything possible to protect it (except, it seems, keeping my mouth shut).

I encrypt all of my backup codes that services provide if I get locked out of my account and do not have access to my physical security key or my 6-digit OTP app on my phone.

My workstations all use FDE (LUKS, Bitlocker, FileVault). I don't use FDE on my servers for obvious reasons, but I have read there is a very complicated way to do FDE on a Raspberry Pi and even remotely enter the key passphrase when it reboots; this is for much further down the road.

## Vulnerability Scanning
I have Greenbone and Nessus Essentials installed on the Debian VM and run regular scans. I do have ClamAV installed on my Linux workstations (and Microsoft Defender for Windows), which I will run occasionally, but I don't download a whole lot of files. I have been experimenting with getting clamd to just run in the background and monitor only the Downloads folder, but haven't had a lot of success.

## Smartphone
My smartphone runs GrapheneOS. I have two profiles, the main profile and the work profile. The main profile uses ReThinkDNS as its firewall. It then connects to the work profile via a proxy program called sing-box, so all traffic goes through that and goes out via the work profile. The work profile is connected to the Internet via WG Tunnel (which connects to my home network). I have the commercial VPN also installed in both profiles as a backup in case something doesn't quite work right. 

<img src="/assets/photos/rethink.png" width="250">

Security- and privacy-focused apps I utilize on the phone are:

- AirGuard - to see if any foreign bluetooth devices keep popping up around me (to indicate if I'm being followed)
- App Lock - I can set a PIN that needs to be entered to open up apps that I want to be slightly more secure
- Hypatia - Uses ClamAV signatures to scan every file downloaded onto the phone in real time
- LocalSend - To quickly send files between devices on my home network that do not go through an outside server
- Orbot - I run some apps through this so they are always using Tor
- Signal - for secure texting

## Miscellaneous
A few other things I do that don't really fit in the above:

- Don't broadcast my WiFi's SSID
- Don't allow devices on my LAN to access the router that my OPNsense is behind (see [networking](/docs/network/networking.md) for details)
- Use nontraditional ports for SSH (yeah I know this isn't going to stop super hackerman, but it's better than nothing)
- Any IoT devices will be blocked from accessing the Internet; if possible I will use PoE for them instead of WiFi
- I have PGP set up for my main email address (though I can't find anybody else who uses it...) and even managed to find a way to use it with Thunderbird on my phone
- I browse on desktop with Librewolf (with a few select extensions to enhance privacy but not enough to majorly fingerprint me) and on the phone with IronFox
